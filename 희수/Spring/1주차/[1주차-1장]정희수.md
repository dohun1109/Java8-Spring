## 스프링 부트 시작하기

## **스프링 부트의 필요성**

### 문제 해결

- **자바 애플리케이션 개발의 복잡성**: 스프링 프레임워크로도 개발자의 일부를 대신하지만, 애플리케이션 실행에 필요한 복잡한 설정 등 여전히 개발자가 직접 처리해야 할 부분이 많음

### 스프링 웹 애플리케이션을 만들려면

- 서블릿에 대한 이해와 서블릿 배포를 위해 필요한 Web.xml 설정을 이해
- 애플리케이션 컴포넌트 패키징에 대한 WAR, EAR 디렉터리 구조에 대한 지식
- 도메인, 포트, 스레드, 데이터 소스 등 애플리케이션 배포 시 필요한 서버 지식
- 복잡한 클래스 로딩 전략, 애플리케이션 모니터링, 유지 관리, 로깅 처리

### 스프링 부트의 역할

- **간소화된 개발**: 설정 없이도 애플리케이션 개발 및 실행이 가능
- **자동 구성**: 스프링 부트는 설정을 자동으로 처리하고 실행 가능한 애플리케이션을 생성
- **편리한 경험**: 개발자가 비즈니스 로직에 집중할 수 있도록 모든 설정을 자동으로 처리

## **스프링 부트 소개 (출시 :** 2014년 4월)

왜 필요한가?

- **간편한 시작**: 스프링 부트는 개발을 빠르고 쉽게 시작할 수 있도록 도와줌. 복잡한 설정을 신경 쓰지 않고도 빠르게 애플리케이션을 만들 수 있음

주요 기능

- 대부분의 경우 스프링 부트의 기본 설정만으로도 애플리케이션을 만들고 실행
- 웹 애플리케이션 개발이 간단해짐
    - 설정 파일을 만들 필요가 없음
    - 서버 없이도 실행 가능
- 개발자 중심 설계
    - 개발자가 복잡한 설정을 신경 쓰지 않고 비즈니스 로직에 집중할 수 있도록 도와줌
    - **스프링 프레임워크와 함께 사용**: 개발자가 설정을 간단하게 만들어줍니다.

![스크린샷 2024-03-30 오후 5.38.07.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/81126acb-9242-416a-970d-78a4341edac1/e9a135b3-43a2-411a-91cb-fd3ea33eda23/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2024-03-30_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_5.38.07.png)

스프링 부트 핵심 기능

- 빠른 시동 - 스프링 부트의 주요 목표 중 하나는 스프링 애플리케이션 개발을 빨리 시작할 수 있게 만드는 것이다. 전통적인 스프링만으로 웹 애플리케이션을 개발한다면 다음과 같은 과정 을 먼저 수행해야 한다.
1. 스프링 MVC 의존 관계를 추가하고 메이븐Maven이나 그레이들Gradle 프로젝트 설정
2. 스프링 MVC DispatcherServlet 설정
3. 애플리케이션 컴포넌트를 WAR 파일로 패키징
4. WAR 파일을 아파치 톰캣Apache Tomcat 같은 서블릿 컨테이너에 배포

스프링 부트를 사용하면 개발자는 애플리케이션에 필요한 의존 관계를 명시하기만 하면 되고 나머 지는 스프링 부트가 알아서 해준다.

- 자동 구성(autoconiguration)- 스프링 부트는 클래스패스에 있는 JAR 파일이나 여러 가지 설정 파 일에 지정된 프로퍼티 정보를 바탕으로 스프링 애플리케이션에 필요한 최소한의 컴포넌트를 알 아서 자동으로 구성해준다. 예를 들어 클래스패스에 H2 인메모리 데이터베이스 드라이버 JAR파일이 있으면 스프링 부트는 H2 데이터베이스 연결에 필요한 데이터 소스를 자동으로 구성해 준다.
- 미리 정의된 방식(opinionated) - 스프링 부트는 미리 정의된 방식을 따른다. 그래서 스프링 애플리 케이션을 실행할 때 필요한 몇 가지 컴포넌트를 스타터starter 의존 관계를 기준으로 자동으로 구성한다. 스타터 의존 관계는 애플리케이션 개발의 특정 영역을 대상으로 관련된 의존 관계를 포함하고 있다. 예를 들어 웹 애플리케이션을 만들 때 spring-boot-starter-web 의존 관계만 추가하면 spring-web, spring-webmvc처럼 웹 애플리케이션 개발에 필요한 의존 관계를 클래 스패스에 전부 넣어준다.
- 독립 실행형(standalone) - 스프링 부트 애플리케이션은 웹 서버를 내장하고 있어서 외부 웹 서버나 애플리케이션 서버 없이도 독립적으로 설치되어 실행할 수 있다. 스프링 부트 애플리케이션은 실행 가능한 JAR 파일로 패키징 되어 java -jar 명령으로 간단하게 실행할 수 있다. 덕분에 스 프링 부트 애플리케이션은 쉽게 컨테이너화될 수 있고 클라우드 네이티브cloud-native 애플리케이 션 개발에도 적합하다.
- 실제 서비스 환경에 사용 가능(production ready - 스프링 부트에는 헬스 체크heath check, 스레드 덤 Ithread dump를 수행하고 기타 유용한 측정지표를 보여주는 기능이 포함돼 있어서, 실제 서비스 환경에 배포된 애플리케이션 모니터링이나 유지 관리를 손쉽게 수행할 수 있다.

### 스프링 부트 컴포넌트

- 주요 컴포넌트
    - spring-boot- 스프링 부트의 기본 컴포넌트로서 다른 컴포넌트를 사용할 수 있도록 지원한다.
      예를 들어 SpringApplication 클래스는 몇 가지 정적 메서드를 가지고 있으며 독립 실행형 스 프링 부트 애플리케이션을 생성한다. spring-boot 컴포넌트에는 톰캣 같은 내장 웹 서버 지원 기능과 데이터베이스 연결 정보 같은 애플리케이션 설정 정보 외부화 지원 기능이 포함돼 있다.
    - spring-boot-autoconfigure- 스프링 부트 애플리케이션 자동 구성 기능을 담당하는 컴포넌 트로서 클래스패스와 설정 파일의 프로퍼티에 지정된 의존 관계를 바탕으로 스프링 빈bean을 추론해서 알맞은 빈을 생성한다. 하지만 사용자가 설정한 빈이 있으면 스프링 부트 자동 구성으로 추론되는 빈 대신에 사용자가 설정한 빈이 생성된다
    - spring-boot-starters - 스타터는 개발자 편의를 위해 제공되는 미리 패키징된 의존 관계 기 술서descriptor 모음이다. 스프링 부트 스타터는 스프링과 스프링의 여러 기술을 개발자에게 쉽게 제공해준다. 스타터가 없으면 개발자가 관련 의존 관계를 모두 직접 설정해야 한다.
    - spring-boot-CLI- 그루비Groory 코드를 컴파일하고 실행할 수 있는 개발자 친화적 명령행 도 구로서, 파일 내용 변경을 감지하는 기능이 있어서 애플리케이션에 수정 사항이 발생할 때마다 직접 재부팅을 할 필요가 없다. 개발자는 CLI 도구 덕분에 메이븐이나 그레이들 같은 의존 관계 관리 도구로부터 벗어날 수 있다. 또한 의존 관계 관리나 빌드 관련 문제에 대한 걱정 없이 프로 토타입 애플리케이션을 아주 빨리 만들 수 있게 해준다. 스프링 부트 CLI에 대한 자세한 내용 은 부록 A에서 살펴본다.
    - spring-boot-actuator- 스프링 부트 애플리케이션을 모니터링하고 감시할 수 있는 액추에이 터 엔드포인트를 제공한다. 스프링 부트에 있는 액주에이터는 JMXL HTTP 엔드포인트로 관리 할 수도 있다. 스프링 부트는 애플리케이션의 여러 측면의 상태를 감지할 수 있도록 미리 정의 된 여러 가지 액추에이터 엔드포인트를 제공한다. 원하는 기능이 미리 정의된 액추에이터 엔드 포인트에 포함돼 있지 않다면 직접 커스텀 액추에이터 엔드포인트를 만들어서 추가할 수도 있 다. 또한 어떤 액추에이터 엔드포인트를 활성화할지 개발자가 선택하여 설정할 수 있으며, 인가 되지 않은 접근으로부터 엔드포인트를 보호할 수도 있다.
    - spring-boot-actuator-autoconfigure - 클래스패스에 있는 클래스를 기반으로 액추에이터 엔드포인트를 자동 구성해주는 컴포넌트로서, 예를 들어 Micrometer(https:/lmicrometerio) 의존 관 계가 클래스패스에 있으면 스프링 부트가 자동으로 MetricsEndpoint를 액추에이터 엔드포인 트로 추가해준다.
    - spring-boot-test- 스프링 부트 애플리케이션 테스트 케이스 작성에 필요한 애너테이션과 메 서드가 포함돼 있다.
    - spring-boot-test-autoconfigure- 애플리케이션 테스트 케이스에 필요한 의존 관계를 자동 으로 구성해준다.
    - spring-boot-loader - 스프링 부트 애플리케이션을 실행 가능한 하나의 JAR 파일로 패키징 하는 데 필요한 모든 의존 관계와 독립 실행형으로 실행할 수 있는 내장 웹 서버를 포함하고 있 다. 이 컴포넌트는 독립적으로 사용하지 않고 메이븐이나 그레이들 플러그인과 함께 사용한다.
    - spring-boot-devtools - 스프링 부트 애플리케이션 개발을 도와주는 여러 가지 개발자 도구 가 들어 있다. 애플리케이션 코드 변경 자동 감지 기능, HTML 변경 사항이 있을 때 자동으로 브라우저 새로 고침을 실행해주는 LiveReload 서버 기능 등이 포함돼 있다. 개발자 도구는 개 발자 생산성을 향상시켜준다.

### 스프링 부트 프로젝트 만들기

- 스프링 이니셜라이저spring Initializr를 사용하면 스프링 부트 프로젝트의 뼈대를 쉽게 생성할 수 있 다. [https://start.springio/에](https://start.springio/%EC%97%90) 접속해서 스프링 이니셜라이저를 사용할 수 있다.

### 스프링 부트 프로젝트 구조

스프링 이니셜라이저를 통해 자동 생성된 스프링 부트 프로젝트 구조는 상대적으로 단순하며 다 음과 같이 스프링 부트 애플리케이션 개발을 시작하는 데 필요한 최소한의 컴포넌트만으로 구성돼 있음

- 스프링 이니셜라이저에서 스프링 부트 프로젝트 생성 시 지정한 의존 관계가 들어 있는 pom.
  xml 파일
- 메이븐을 로컬 컴퓨터에 설치하지 않고도 프로젝트를 빌드할 수 있게 해주는 메이븐 래퍼Maven wrapper 파일
- 소스 코드와 테스트 코드를 분리해서 담고 있는 패키지 구조. 소스 패키지에는 메인main 메서드가 있는 자바 클래스가 포함돼 있고, 테스트 패키지에는 비어 있는 테스트 클래스가 들어 있다.
- application.properties 파일이 들어 있는 리소스 폴더. 프로젝트를 진행하면서 사용할 여러 가지 파일을 추가할 수 있다.

### 

![스크린샷 2024-03-30 오후 5.52.08.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/81126acb-9242-416a-970d-78a4341edac1/fc72bfff-d73e-4e1a-9956-5eeb0f20d746/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2024-03-30_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_5.52.08.png)

### 요약

스프링 부트를 사용하면 다른 웹 서버나 애플리케이션 서버에 의존하지 않고 독립적으로 설치 및 실행할 수 있고, 실제 운영 환경에서 사용할 수 있는 제품 수준의 애플리케이션을 설정에 관한 부담 없이 만들어낼 수 있다. 스프링 부트의 자동 구성과 스타터 기반 의존 관계 관리 체계 덕분에 개 발자는 애플리케이션 설정에 드는 노력을 줄이고 비즈니스 로직에 더 집중할 수 있다.

주요 내용

- 스프링 부트가 무엇이고, 전통적인 스프링 애플리케이션에 비해 더 나은 점은 무엇인가
- 스프링 부트 기능과 다양한 컴포넌트
- 스프링 이니셜라이저를 통해 자동으로 만들어진 스프링 부트 프로젝트의 구조와 구성 요소
- 스프링 부트 프로젝트로부터 실행 가능한 JAR 파일을 만드는 방법과 JAR 파일의 구조
- 실행 중인 스프링 부트 애플리케이션을 안전하게 종료하는 방법
- 다양한 스프링 부트 스타트업 이벤트와 이벤트 발생을 감지하는 여러 가지 방법
- 개발자가 직접 만들 수 있는 커스텀 스타터, 자동 구성, 실패 분석기, 액주에이터